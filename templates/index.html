<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>eventBOTSTER</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
  // Variables passed from Flask
  var SHOULD_SHOW_TABLE = ('{{ show_data }}' === 'true');
  var RETURNED_DATA = '{{ data | safe }}';

  $(document).ready(function() {

    if (SHOULD_SHOW_TABLE) $( ".data" ).show();
    else $( ".data" ).hide();
   
    data = $.parseJSON(RETURNED_DATA);
    if (data.length > 0) {
      for (var i=0; i<data.length; i++) {
        var title = data[i].title;
        var url = data[i].url;
        var startDateTime = data[i].start_time;
        var category = data[i].category;
        var minPrice = data[i].min_price;
        var maxPrice = data[i].max_price;
        var zipCode = data[i].zip_code;
        var venue = data[i].venue;
        
        var row = `<tr><td>${i}</td>
                       <td>${title}</td>
                       <td><a href="${url}">Link</a></td>
                       <td>${startDateTime}</td>
                       <td>${category}</td>
                       <td>${minPrice}</td>
                       <td>${maxPrice}</td>
                       <td>${zipCode}</td>
                       <td>${venue}</td>
                   </tr>`;
        $( ".data tbody" ).append(row);
      } 
    }

    var input = $("#userIn").val;
    $( "#userIn" ).focusin(function() {
      $( this ).attr("placeholder", "");
    });
    
    $( "#userIn" ).focusout(function() {
      $( this ).attr("placeholder", "what are you looking for?");
    });
    
    $('#userIn').keypress(function (e) {
      if (e.which == 13) {
        if (form[0].value != "" || form[0].value != " ") {
          form.submit();
          return false;
        }
      }
    });

});
</script>

<style>
.main {
	height: 100vh;
}

.vertical-align {
 position: relative;
  top: 50%;
  transform: translateY(-50%);	
  -webkit-transform: translateY(-50%);
  -moz-transform: translateY(-50%);
  -ms-transform: translateY(-50%);
  -o-transform: translateY(-50%);
}

.horizontal-center {
	display: block;
  margin-left: auto;
  margin-right: auto;	
	}
.btn-center {
	display:table; 
	margin:0 auto; 
}

input:focus {
outline: none;
}
	
input {
  font-size: 5vw;
  text-align: center;
  border: 0;
  outline: 0;
  background: transparent;
  border-bottom: 2px solid rgba(33, 33, 33, 0.56);
  color: #212121;
  padding-bottom: 1.5vw;
  letter-spacing: -.3vw;
  font-family: Helvetica;
  font-weight: 100;
}
</style>
</head>

<body>
<div class="main">
  <form id="form" class="btn-center vertical-align" method="post" action="http://localhost:5000/">
    <input id="userIn" placeholder="what are you looking for?" type="text" name="userIn">
  </form>

  <table class="data">
    <thead>
      <td>Title</td>
      <td>URL</td>
      <td>Start Date</td>
      <td>Category</td>
      <td>Minimum Price</td>
      <td>Maximum Price</td>
      <td>Zipcode</td>
      <td>Venue</td>
    </thead>
    <tbody>
    </tbody>
  </table>
</div>
</body>
</html>
